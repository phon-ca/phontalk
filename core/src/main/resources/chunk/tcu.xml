<?xml version="1.0" encoding="UTF-8"?>

<!-- 
-->
<chunk xmlns="https://www.phon.ca/ns/chunk">
    
    <!-- Parser -->
    <buffer name="TalkBank2AST.g">
        <![CDATA[
tcu
    :    TCU_START u+ TCU_END
    ->    ^(TCU_START u+)
    ;
]]>
    </buffer>
    
    <!-- Tree Walker -->
    <buffer name="AST2Phon.g">
        <![CDATA[
tcu returns [List<Record> records]
@before {
    $records = new ArrayList<Record>();
}
    :    ^(TCU_START (tcuGrp+=u{$records.add($u.record);})+)
    {
        // add TCU comments to appropriate records
        Record firstRecord = (Record)$tcuGrp.get(0);
        Record lastRecord = (Record)$tcuGrp.get($tcuGrp.size()-1);
        
        Comment tcuStart = sessionFactory.createComment(CommentEnum.BeginTcu, "");
        firstRecord.addComment(tcuStart);
        
        Comment tcuEnd = sessionFactory.createComment(CommentEnum.EndTcu, "");
        lastRecord.addComment(tcuEnd);
    }
    ;
]]>
    </buffer>
    
    <buffer name="AST2TalkBank.g">
        <![CDATA[
tcu
    :    ^(TCU_START vals+=u+)
    ->    template(content={$vals})
    <<\<tcu\><content>\</tcu\> >>
    ;
]]>
    </buffer>
    
    <!-- Includes -->
    <include>u.xml</include>
    
</chunk>
